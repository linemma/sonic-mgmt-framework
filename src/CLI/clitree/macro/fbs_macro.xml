<?xml version="1.0" encoding="utf-8"?>
<ROOT>
    <MACRODEF name="SERVICE-POLICY-INTERFACE-OPTIONS">
        <PARAM name="interface-options" help="Show policies applied for interface" ptype="SUBCOMMAND" mode="switch">
            <PARAM name="Ethernet" help="Ethernet interface" ptype="SUBCOMMAND" mode="subcommand">
                <PARAM name="eth-if-id" help="Ethernet interface id" ptype="UINT" />
            </PARAM>
            <PARAM name="PortChannel" help="PortChannel interface" ptype="SUBCOMMAND" mode="subcommand">
                <PARAM name="po-if-id" help="PortChannel interface id" ptype="LAG_ID"/>
            </PARAM>
            <PARAM name="Vlan" help="Vlan interface" ptype="SUBCOMMAND" mode="subcommand">
                <PARAM name="vlan-if-id" help="Vlan interface id" ptype="VLAN_ID"/>
            </PARAM>
        </PARAM>
    </MACRODEF>

    <MACRODEF name="FBS-POLICY-TYPES">
        <PARAM name="type" help="Policy type" ptype="SUBCOMMAND" mode="subcommand" optional="arg1" order="true">
            <PARAM name="fbs-policy-type" help="Policy type" ptype="SUBCOMMAND" mode="switch">
                <PARAM name="qos" help="QoS Policy" ptype="SUBCOMMAND" mode="subcommand" />
                <PARAM name="monitoring" help="Monitoring Policy" ptype="SUBCOMMAND" mode="subcommand" />
                <PARAM name="forwarding" help="Forwarding Policy" ptype="SUBCOMMAND" mode="subcommand" />
            </PARAM>
        </PARAM>
    </MACRODEF>

    <MACRODEF name="FBS-CLASSIFIER-TYPES">
    </MACRODEF>

    <MACRODEF name="MATCH-ADDRESS-TYPES-ADD">
        <PARAM name="address-types" help="address-types" ptype="SUBCOMMAND" mode="switch">
            <PARAM name="mac" help="Match on arg1 MAC address" ptype="SUBCOMMAND" mode="subcommand">
                <PARAM name="arg1-mac-addr-val" help="MAC address" ptype="arg2"/>
            </PARAM>
            <PARAM name="ip" help="Match on arg1 IP address" ptype="SUBCOMMAND" mode="subcommand">
                <PARAM name="arg1-ip-addr-val" help="IP address" ptype="arg3"/>
            </PARAM>
            <PARAM name="ipv6" help="Match on arg1 IPv6 address" ptype="SUBCOMMAND" mode="subcommand">
                <PARAM name="arg1-ipv6-addr-val" help="IPv6 address" ptype="arg4"/>
            </PARAM>
        </PARAM>
    </MACRODEF>

    <MACRODEF name="MATCH-ADDRESS-TYPES-DEL">
        <PARAM name="address-types" help="address-types" ptype="SUBCOMMAND" mode="switch">
            <PARAM name="mac" help="Delete match on arg1 MAC address" ptype="SUBCOMMAND" mode="subcommand"/>
            <PARAM name="ip" help="Delete match on arg1 IP address" ptype="SUBCOMMAND" mode="subcommand"/>
            <PARAM name="ipv6" help="Delete match on arg1 IPv6 address" ptype="SUBCOMMAND" mode="subcommand"/>
        </PARAM>
    </MACRODEF>

    <MACRODEF name="CLASSIFIER-DESCRIPTION">
        <COMMAND name="description" help="Configure classifier description">
            <PARAM name="description-value" help="String" ptype="DESCRIPTION"/>
            <ACTION builtin="clish_pyobj">sonic_cli_fbs set_classifier_description ${fbs-class-name} ${description-value}</ACTION>
        </COMMAND>

        <COMMAND name="no description" help="Clear classifier description">
            <ACTION builtin="clish_pyobj">sonic_cli_fbs clear_classifier_description ${fbs-class-name}</ACTION>
        </COMMAND>
    </MACRODEF>

    <MACRODEF name="FBS-DIRECTION-TYPES">
        <PARAM name="fbs-direction-type" help="Policy type" ptype="SUBCOMMAND" mode="switch">
            <PARAM name="in" help="Ingress direction" ptype="SUBCOMMAND" mode="subcommand"/>
            <PARAM name="out" help="Egress direction" ptype="SUBCOMMAND" mode="subcommand"/>
        </PARAM>
    </MACRODEF>

    <MACRODEF name="FBS-POLICY-BINDING-OPTIONS">
        <COMMAND name="service-policy" help="Apply ingress or egress policy">
            <MACRO name="FBS-POLICY-TYPES" arg="false" />
            <MACRO name="FBS-DIRECTION-TYPES" arg='"${fbs-policy-type}" = "qos"'/>
            <PARAM name="fbs-policy-name" help="Name of the policy (Max size 63)" ptype="STRING_63"/>
            <ACTION builtin="clish_pyobj">sonic_cli_fbs bind_policy ${fbs-policy-name} ${fbs-policy-type} ${fbs-direction-type} ${iface} ${vlan_name} ${po_name}</ACTION>
        </COMMAND>

        <COMMAND name="no service-policy" help="Remove ingress or egress policy">
            <MACRO name="FBS-POLICY-TYPES" arg="false" />
            <PARAM name="fbs-direction-type" help="Policy type" ptype="SUBCOMMAND" mode="switch">
                <PARAM name="in" help="Ingress direction" ptype="SUBCOMMAND" mode="subcommand"/>
                <PARAM name="out" help="Egress direction" ptype="SUBCOMMAND" mode="subcommand" test='"${fbs-policy-type}" = "qos"'/>
            </PARAM>
            <ACTION builtin="clish_pyobj">sonic_cli_fbs unbind_policy ${fbs-policy-type} ${fbs-direction-type} ${iface} ${vlan_name} ${po_name}</ACTION>
        </COMMAND>
    </MACRODEF>
</ROOT>
